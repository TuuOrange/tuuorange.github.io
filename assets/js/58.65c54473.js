(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{495:function(t,s,a){"use strict";a.r(s);var r=a(2),n=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"微信分享时-ios-上的第一次的分享内容不会生成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微信分享时-ios-上的第一次的分享内容不会生成"}},[t._v("#")]),t._v(" 微信分享时，iOS 上的第一次的分享内容不会生成")]),t._v(" "),s("h3",{attrs:{id:"主要原因"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主要原因"}},[t._v("#")]),t._v(" 主要原因")]),t._v(" "),s("p",[t._v("当我们使用 history 路由模式时，在 iOS 上进行微信分享，iOS 会把第一次进入的 url 作为真实 url（因为 history 主要利用 historyAPI 实现，操作历史记录，进行重定向。而安卓会将当前 url 作为真实 URL 所以不存在这个问题），而我们配置的路径一般不是首页，所以可能会导致签名错误。")]),t._v(" "),s("h3",{attrs:{id:"解决方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[t._v("#")]),t._v(" 解决方法")]),t._v(" "),s("p",[t._v("记录本页面的路由地址（缓存 Url），当签名 url 时进行判断，如果是 ios 则将我们的缓存 Url 作为分享路由，安卓直接取当前路由")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" signatureUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isiOSWechat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" commonStore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("commonState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("visitUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" shareUrl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("...后续有再更新...")])])}),[],!1,null,null,null);s.default=n.exports}}]);